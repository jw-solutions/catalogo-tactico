<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cat√°logo T√°ctico</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #000000;
      color: #ffffff;
      overflow-x: hidden;
    }
    
    .container {
      display: flex;
      min-height: 100vh;
    }
    
    /* MEN√ö LATERAL */
    .sidebar {
      width: 280px;
      background-color: #000000;
      border-right: 2px solid #00ff6a;
      padding: 20px;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
    }
    
    .logo-container {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .logo {
      max-width: 180px;
      width: 100%;
      height: auto;
      border: 2px solid #00ff6a;
      box-shadow: 0 0 15px rgba(0, 255, 106, 0.4);
      margin-bottom: 15px;
    }
    
    .sidebar h1 {
      color: #00ff6a;
      font-size: 24px;
      font-weight: 900;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 0 0 10px rgba(0, 255, 106, 0.5);
      letter-spacing: 2px;
    }
    
    .categoria-item {
      background-color: #0a0a0a;
      border: 2px solid #00ff6a;
      padding: 12px 16px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      font-weight: 700;
      font-size: 13px;
      letter-spacing: 1px;
    }
    
    .categoria-item:hover {
      background-color: #00ff6a;
      color: #000000;
      box-shadow: 0 0 20px rgba(0, 255, 106, 0.6);
      transform: translateX(5px);
    }
    
    .categoria-item.active {
      background-color: #00ff6a;
      color: #000000;
      box-shadow: 0 0 15px rgba(0, 255, 106, 0.5);
    }
    
    /* CONTENIDO */
    .content {
      margin-left: 280px;
      padding: 30px;
      width: calc(100% - 280px);
    }
    
    .header {
      margin-bottom: 30px;
      text-align: center;
    }
    
    .header h2 {
      color: #00ff6a;
      font-size: 28px;
      font-weight: 900;
      text-shadow: 0 0 10px rgba(0, 255, 106, 0.5);
    }
    
    /* GRILLA DE PRODUCTOS */
    .productos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      padding: 10px;
    }
    
    .producto-card {
      background-color: #0a0a0a;
      border: 2px solid #00ff6a;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .producto-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0, 255, 106, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }
    
    .producto-card:hover::before {
      transform: translateX(100%);
    }
    
    .producto-card:hover {
      box-shadow: 0 0 25px rgba(0, 255, 106, 0.6);
      transform: translateY(-5px);
    }
    
    .producto-imagen {
      width: 100%;
      height: 220px;
      object-fit: cover;
      border: 1px solid #00ff6a;
      margin-bottom: 15px;
      background-color: #000;
    }
    
    .producto-nombre {
      font-size: 16px;
      font-weight: 700;
      color: #00ff6a;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .producto-precio {
      font-size: 20px;
      font-weight: 900;
      color: #ffffff;
      text-shadow: 0 0 10px rgba(0, 255, 106, 0.3);
    }
    
    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      overflow-y: auto;
    }
    
    .modal.active {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .modal-content {
      background-color: #0a0a0a;
      border: 3px solid #00ff6a;
      max-width: 900px;
      width: 100%;
      position: relative;
      padding: 30px;
      box-shadow: 0 0 50px rgba(0, 255, 106, 0.5);
    }
    
    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background-color: #00ff6a;
      color: #000000;
      border: none;
      width: 40px;
      height: 40px;
      font-size: 24px;
      cursor: pointer;
      font-weight: 900;
      transition: all 0.3s;
    }
    
    .modal-close:hover {
      box-shadow: 0 0 20px rgba(0, 255, 106, 0.8);
      transform: rotate(90deg);
    }
    
    /* CARRUSEL */
    .carrusel-container {
      position: relative;
      margin-bottom: 25px;
    }
    
    .carrusel-imagen {
      width: 100%;
      height: 450px;
      object-fit: contain;
      border: 2px solid #00ff6a;
      background-color: #000000;
    }
    
    .carrusel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: #00ff6a;
      color: #000000;
      border: none;
      width: 50px;
      height: 50px;
      font-size: 24px;
      cursor: pointer;
      font-weight: 900;
      transition: all 0.3s;
    }
    
    .carrusel-btn:hover {
      box-shadow: 0 0 20px rgba(0, 255, 106, 0.8);
    }
    
    .carrusel-btn.prev { left: 10px; }
    .carrusel-btn.next { right: 10px; }
    
    .carrusel-indicadores {
      text-align: center;
      margin-top: 15px;
    }
    
    .indicador {
      display: inline-block;
      width: 12px;
      height: 12px;
      background-color: #333;
      border: 1px solid #00ff6a;
      margin: 0 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .indicador.active {
      background-color: #00ff6a;
      box-shadow: 0 0 10px rgba(0, 255, 106, 0.8);
    }
    
    /* INFO PRODUCTO */
    .modal-info h2 {
      color: #00ff6a;
      font-size: 26px;
      font-weight: 900;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .modal-info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .info-item {
      background-color: #00ff6a;
      color: #000000;
      padding: 12px;
      font-weight: 700;
      border: 2px solid #00ff6a;
    }
    
    .info-item span {
      display: block;
      font-size: 12px;
      margin-bottom: 5px;
      opacity: 0.8;
    }
    
    .modal-descripcion {
      background-color: #0a0a0a;
      border: 2px solid #00ff6a;
      padding: 20px;
      line-height: 1.6;
      color: #ffffff;
    }
    
    /* LOADER */
    .loader {
      text-align: center;
      padding: 50px;
      color: #00ff6a;
      font-size: 18px;
      font-weight: 700;
    }
    
    .loader::after {
      content: '...';
      animation: dots 1.5s infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
    
    /* RESPONSIVE */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        border-right: none;
        border-bottom: 2px solid #00ff6a;
      }
      
      .content {
        margin-left: 0;
        width: 100%;
        padding: 20px;
      }
      
      .productos-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
      }
      
      .carrusel-imagen {
        height: 300px;
      }
      
      .modal-info-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  
  <div class="container">
    <aside class="sidebar">
      <div class="logo-container">
        <img src="https://lh3.googleusercontent.com/d/19CNb_A7d7Ebu_z9wXRE1dotgOZDsKeiG" alt="Logo" class="logo">
      </div>
      <h1>‚ö° CAT√ÅLOGO T√ÅCTICO ‚ö°</h1>
      <div id="categorias-menu">
        <div class="loader">CARGANDO CATEGOR√çAS</div>
      </div>
    </aside>
    
    <main class="content">
      <div class="header">
        <h2 id="categoria-actual">TODOS LOS PRODUCTOS</h2>
      </div>
      
      <div id="productos-container" class="productos-grid">
        <div class="loader">CARGANDO PRODUCTOS</div>
      </div>
    </main>
  </div>
  
  <div id="modal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="cerrarModal()">√ó</button>
      
      <div class="carrusel-container">
        <img id="carrusel-imagen" class="carrusel-imagen" src="" alt="Producto">
        <button class="carrusel-btn prev" onclick="cambiarImagen(-1)">‚Äπ</button>
        <button class="carrusel-btn next" onclick="cambiarImagen(1)">‚Ä∫</button>
        <div id="carrusel-indicadores" class="carrusel-indicadores"></div>
      </div>
      
      <div class="modal-info">
        <h2 id="modal-nombre"></h2>
        <div class="modal-info-grid">
          <div class="info-item">
            <span>COLOR</span>
            <div id="modal-color"></div>
          </div>
          <div class="info-item">
            <span>CATEGOR√çA</span>
            <div id="modal-categoria"></div>
          </div>
          <div class="info-item" style="grid-column: 1 / -1;">
            <span>PRECIO</span>
            <div id="modal-precio"></div>
          </div>
        </div>
        <div class="modal-descripcion" id="modal-descripcion"></div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script>
    // ==========================================
    // CONFIGURACI√ìN - PEGA AQU√ç TU URL DE GOOGLE SHEETS
    // ==========================================
    const GOOGLE_SHEETS_CSV_URL = 'TU_URL_CSV_AQUI';
    
    // Variables globales
    let todosLosProductos = [];
    let productoActual = null;
    let imagenActualIndex = 0;
    
    // Inicializar al cargar
    window.onload = function() {
      cargarDatosDesdeSheets();
    };
    
    // ==========================================
    // CARGAR DATOS DESDE GOOGLE SHEETS
    // ==========================================
    function cargarDatosDesdeSheets() {
      Papa.parse(GOOGLE_SHEETS_CSV_URL, {
        download: true,
        header: true,
        complete: function(results) {
          procesarDatos(results.data);
        },
        error: function(error) {
          console.error('Error al cargar:', error);
          document.getElementById('productos-container').innerHTML = 
            '<div class="loader">ERROR AL CARGAR DATOS</div>';
        }
      });
    }
    
    function procesarDatos(datos) {
      const productos = {};
      
      // Agrupar productos por nombre + color
      datos.forEach(row => {
        if (!row['Nombre del art√≠culo'] || !row['Categor√≠a']) return;
        
        const key = row['Nombre del art√≠culo'] + '_' + (row['Color'] || '');
        
        if (!productos[key]) {
          productos[key] = {
            nombre: row['Nombre del art√≠culo'],
            color: row['Color'] || '',
            categoria: row['Categor√≠a'],
            costo: parseFloat(row['Costo']) || 0,
            precio: parseFloat(row['Precio venta']) || 0,
            descripcion: row['Descripci√≥n'] || 'Sin descripci√≥n',
            imagenes: []
          };
        }
        
        // Agregar imagen
        if (row['Imagen (URL Drive)']) {
          productos[key].imagenes.push({
            numero: parseInt(row['N√∫mero de imagen']) || 1,
            url: row['Imagen (URL Drive)']
          });
        }
      });
      
      // Convertir a array y ordenar im√°genes
      todosLosProductos = Object.values(productos);
      todosLosProductos.forEach(p => {
        p.imagenes.sort((a, b) => a.numero - b.numero);
      });
      
      cargarCategorias();
      mostrarProductos(todosLosProductos);
    }
    
    // ==========================================
    // CATEGOR√çAS
    // ==========================================
    function cargarCategorias() {
      const categorias = [...new Set(todosLosProductos.map(p => p.categoria))].sort();
      const menu = document.getElementById('categorias-menu');
      
      let html = '<div class="categoria-item active" onclick="filtrarPorCategoria(\'TODOS\')">üéØ TODOS</div>';
      categorias.forEach(cat => {
        html += `<div class="categoria-item" onclick="filtrarPorCategoria('${cat}')">${cat}</div>`;
      });
      
      menu.innerHTML = html;
    }
    
    function filtrarPorCategoria(categoria) {
      document.getElementById('categoria-actual').textContent = 
        categoria === 'TODOS' ? 'TODOS LOS PRODUCTOS' : categoria;
      
      document.querySelectorAll('.categoria-item').forEach(item => {
        item.classList.remove('active');
      });
      event.target.classList.add('active');
      
      const filtrados = categoria === 'TODOS' ? 
        todosLosProductos : 
        todosLosProductos.filter(p => p.categoria === categoria);
      
      mostrarProductos(filtrados);
    }
    
    // ==========================================
    // MOSTRAR PRODUCTOS
    // ==========================================
    function mostrarProductos(productos) {
      const container = document.getElementById('productos-container');
      
      if (productos.length === 0) {
        container.innerHTML = '<div class="loader">NO HAY PRODUCTOS</div>';
        return;
      }
      
      let html = '';
      productos.forEach((producto, index) => {
        const img = producto.imagenes[0]?.url || '';
        html += `
          <div class="producto-card" onclick='abrirModal(${index})'>
            <img src="${img}" alt="${producto.nombre}" class="producto-imagen" 
                 onerror="this.src='https://via.placeholder.com/280x220/0a0a0a/00ff6a?text=Sin+Imagen'">
            <div class="producto-nombre">${producto.nombre}</div>
            <div class="producto-precio">$${formatearPrecio(producto.precio)}</div>
          </div>
        `;
      });
      
      container.innerHTML = html;
    }
    
    // ==========================================
    // MODAL Y CARRUSEL
    // ==========================================
    function abrirModal(index) {
      productoActual = todosLosProductos[index];
      imagenActualIndex = 0;
      
      document.getElementById('modal-nombre').textContent = productoActual.nombre;
      document.getElementById('modal-color').textContent = productoActual.color;
      document.getElementById('modal-categoria').textContent = productoActual.categoria;
      document.getElementById('modal-precio').textContent = '
      
      actualizarCarrusel();
      crearIndicadores();
      
      document.getElementById('modal').classList.add('active');
    }
    
    function cerrarModal() {
      document.getElementById('modal').classList.remove('active');
    }
    
    function cambiarImagen(direccion) {
      if (!productoActual) return;
      
      imagenActualIndex += direccion;
      
      if (imagenActualIndex < 0) {
        imagenActualIndex = productoActual.imagenes.length - 1;
      } else if (imagenActualIndex >= productoActual.imagenes.length) {
        imagenActualIndex = 0;
      }
      
      actualizarCarrusel();
    }
    
    function irAImagen(index) {
      imagenActualIndex = index;
      actualizarCarrusel();
    }
    
    function actualizarCarrusel() {
      if (!productoActual || !productoActual.imagenes[imagenActualIndex]) return;
      
      document.getElementById('carrusel-imagen').src = productoActual.imagenes[imagenActualIndex].url;
      
      document.querySelectorAll('.indicador').forEach((ind, i) => {
        ind.classList.toggle('active', i === imagenActualIndex);
      });
    }
    
    function crearIndicadores() {
      const container = document.getElementById('carrusel-indicadores');
      let html = '';
      
      productoActual.imagenes.forEach((img, i) => {
        html += `<span class="indicador ${i === 0 ? 'active' : ''}" onclick="irAImagen(${i})"></span>`;
      });
      
      container.innerHTML = html;
    }
    
    // ==========================================
    // UTILIDADES
    // ==========================================
    function formatearPrecio(precio) {
      return Number(precio).toLocaleString('es-AR', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }
    
    // Cerrar modal con ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') cerrarModal();
    });
    
    // Cerrar modal al hacer click fuera
    document.getElementById('modal').addEventListener('click', function(e) {
      if (e.target === this) cerrarModal();
    });
  </script>
</body>
</html> + formatearPrecio(productoActual.precio);
      document.getElementById('modal-descripcion').textContent = productoActual.descripcion;
      
      actualizarCarrusel();
      crearIndicadores();
      
      document.getElementById('modal').classList.add('active');
    }
    
    function cerrarModal() {
      document.getElementById('modal').classList.remove('active');
    }
    
    function cambiarImagen(direccion) {
      if (!productoActual) return;
      
      imagenActualIndex += direccion;
      
      if (imagenActualIndex < 0) {
        imagenActualIndex = productoActual.imagenes.length - 1;
      } else if (imagenActualIndex >= productoActual.imagenes.length) {
        imagenActualIndex = 0;
      }
      
      actualizarCarrusel();
    }
    
    function irAImagen(index) {
      imagenActualIndex = index;
      actualizarCarrusel();
    }
    
    function actualizarCarrusel() {
      if (!productoActual || !productoActual.imagenes[imagenActualIndex]) return;
      
      document.getElementById('carrusel-imagen').src = productoActual.imagenes[imagenActualIndex].url;
      
      document.querySelectorAll('.indicador').forEach((ind, i) => {
        ind.classList.toggle('active', i === imagenActualIndex);
      });
    }
    
    function crearIndicadores() {
      const container = document.getElementById('carrusel-indicadores');
      let html = '';
      
      productoActual.imagenes.forEach((img, i) => {
        html += `<span class="indicador ${i === 0 ? 'active' : ''}" onclick="irAImagen(${i})"></span>`;
      });
      
      container.innerHTML = html;
    }
    
    // ==========================================
    // UTILIDADES
    // ==========================================
    function formatearPrecio(precio) {
      return Number(precio).toLocaleString('es-AR', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }
    
    // Cerrar modal con ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') cerrarModal();
    });
    
    // Cerrar modal al hacer click fuera
    document.getElementById('modal').addEventListener('click', function(e) {
      if (e.target === this) cerrarModal();
    });
  </script>
</body>
</html>
